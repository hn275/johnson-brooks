---
import type { Product } from "src/pages/index.astro";
import cx from "classnames";
import { AddToCart } from "@components/Cart/AddToCart";
import type { CartItem } from "@components/Cart/store";

const { title, src, price, inventory, material, description, id } =
  Astro.props as Product;

const cartItem: CartItem = {
  description,
  quantity: 1,
  unitPrice: price,
  productTitle: title,
};
---

<div
  class={cx("bg-white p-3 shadow-lg shadow-slate-400/20 rounded-md", "w-full")}
>
  <img
    loading="lazy"
    src={`data:image/png;base64,${src}`}
    alt={title}
    class="w-full rounded-sm"
  />

  <div class="mt-6 flex flex-col gap-3">
    <h3 class="text-lg font-semibold text-brand-200">{title}</h3>

    <p class={cx("text-xs text-brand-200")}>
      {material}
    </p>

    <p>{description}</p>

    <div class="text-sm">
      <p>Inventory: {inventory}</p>
      <p>Price: ${price.toFixed(2)}</p>
    </div>

    <AddToCart client:load productID={id as string} item={cartItem} />
  </div>
</div>
