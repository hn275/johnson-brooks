---
import type { Product } from "@schemas/index";
import cx from "classnames";
import { AddToCart } from "@components/Cart/AddToCart";
import type { CartItem } from "@components/Cart/store";
import { Carousel } from "./Carousel";

const { title, price, material, description, id, variants } =
  Astro.props as Product;

const cartItem: CartItem = {
  description,
  quantity: 1,
  unitPrice: price,
  productTitle: title,
};
---

<div
  class={cx("bg-white p-3 shadow-lg shadow-slate-400/20 rounded-md", "w-full")}
>
  <div class="text-xs text-slate-600">
    <Carousel client:load variants={variants} />
    <p>{material}</p>
  </div>

  <div class="mt-3 flex flex-col gap-3">
    <div>
      <h3 class="text-lg font-semibold text-brand-200 uppercase">
        {title}
      </h3>
      <p class="text-sm">${price.toFixed(2)}</p>
    </div>

    <p>{description}</p>

    <AddToCart client:load productID={id as string} item={cartItem} />
  </div>
</div>
