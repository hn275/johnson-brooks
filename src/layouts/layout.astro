---
import { CgMenuLeftAlt } from "react-icons/cg";
import { Cart } from "@components/Nav/Cart.tsx";
import { SmallLogo } from "@components/Nav/SmallLogo";
import { FaInstagram, FaFacebook } from "react-icons/fa";
import cx from "classnames";

type NavLinks = { text: string; href: string };

const services: NavLinks[] = [
  { text: "Climbing", href: "/climbing" },
  { text: "Wood shop", href: "/woodshop" },
  { text: "3D Prints", href: "/printing" },
];

const navLinks: NavLinks[] = [
  { text: "Contact", href: "/contact" },
  { text: "About", href: "/about" },
];
---

<nav
  class={cx(
    "w-0 overflow-clip transition-all",
    "sticky top-0 left-0 z-50",
    "md:w-full",
    "shadow bg-white",
    "flex justify-center items-center"
  )}
>
  <div
    class={cx(
      "p-8 pt-20 grow h-full flex flex-col md:flex-row",
      "md:p-6",
      "max-w-7xl"
    )}
  >
    <div class={cx("whitespace-nowrap grow", "md:flex gap-5")}>
      <SmallLogo className="hidden md:block w-16" />

      <ul class="flex flex-col gap-3 md:flex-row md:items-center">
        {
          services.map(({ text, href }) => (
            <li>
              <a class="relative group w-max" href={href}>
                {text}
              </a>
            </li>
          ))
        }
      </ul>
    </div>

    <div class="flex gap-5 items-center">
      <ul class="flex flex-col gap-3 md:flex-row">
        {
          navLinks.map(({ text, href }) => (
            <li>
              <a href={href}>{text}</a>
            </li>
          ))
        }
        <li class="ml-3">
          <a href="#">
            <Cart />
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="flex md:flex-col w-full max-w-7xl mx-auto">
  <section class="flex flex-col h-full w-full" id="content">
    <div
      class={cx(
        "flex justify-between items-center md:hidden p-4",
        "sticky top-0 bg-white"
      )}
    >
      <CgMenuLeftAlt
        id="menu-toggler"
        size={24}
        className="cursor-pointer text-slate-500"
      />

      <SmallLogo className={cx("w-16 h-auto")} />

      <div>
        <ul>
          <li>
            <Cart />
          </li>
        </ul>
      </div>
    </div>

    <main class="grow py-10 mx-auto w-full">
      <slot />
    </main>
  </section>
</div>

<footer class="bg-white text-sm text-slate-500">
  <div
    class={cx(
      "w-full max-w-7xl mx-auto",
      "flex justify-between items-center p-5"
    )}
  >
    <p>Johnson and Brooks &#169; | 2023</p>

    <div class="flex gap-3">
      <a target="_blank">
        <FaInstagram
          className="cursor-pointer text-inherit"
          title="instagram"
        />
      </a>
      <a target="_blank">
        <FaFacebook className="cursor-pointer text-inherit" title="facebook" />
      </a>
    </div>
  </div>
</footer>

<script>
  const menuBtn = document.getElementById("menu-toggler")!;
  const nav = document.querySelector("nav")!;
  menuBtn.addEventListener("click", () => {
    nav.classList.toggle("w-36");
  });
</script>
