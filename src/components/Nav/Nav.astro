---
import "./hamburger.css";
import cx from "classnames";
import { PAGES, LINKS } from "@lib/routes";
import { Icon } from "astro-icon";

const navLinks = [
  { text: "Shop", href: PAGES.shop },
  { text: "3D Printing", href: PAGES.printing },
  { text: "About/Contact", href: PAGES.about },
];

const socialLinks = [
  { icon: { pack: "ic", name: "baseline-facebook" }, href: LINKS.facebook },
  { icon: { pack: "mdi", name: "instagram" }, href: LINKS.instagram },
];
---

<button
  id="menu-btn"
  aria-label="menu button"
  class={cx(
    "hamburger hamburger--squeeze",
    "fixed top-0 right-0 z-[999]",
    "text-slate-900 bg-brand-200",
    "hover:brightness-125",
  )}
  type="button"
>
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>

<nav
  id="nav"
  class={cx(
    "fixed top-0 left-0 bottom-0 right-0",
    "bg-brand-200 text-slate-200",
    "isolate -translate-y-full transition-all duration-300",
    "flex flex-col justify-center items-center gap-10 md:gap-20",
  )}
>
  <ul
    class={cx(
      "z-10",
      "flex flex-col justify-center items-center gap-3 md:gap-10",
      "text-3xl md:text-6xl font-semibold",
    )}
  >
    {
      navLinks.map(({ text, href }) => (
        <li class="nav-links">
          <a href={href} class="hover:text-brand-100 transition-colors">
            {text}
          </a>
        </li>
      ))
    }
  </ul>

  <ul class={cx("z-10", "flex gap-5 items-center")}>
    {
      socialLinks.map(({ href, icon }) => (
        <li>
          <a
            href={href}
            class={cx(
              "text-3xl md:text-6xl",
              "hover:text-brand-100 transition-colors",
            )}
          >
            <Icon {...icon} size={40} />
          </a>
        </li>
      ))
    }
  </ul>
</nav>

<script>
  const menuBtn = document.getElementById("menu-btn");
  const nav = document.getElementById("nav");

  const toggleMenu = () => {
    menuBtn?.classList.toggle("is-active");
    nav?.classList.toggle("open");
  };
  menuBtn?.addEventListener("click", toggleMenu);
  nav?.addEventListener("click", toggleMenu);

  // active link color
  const navLinks = document.querySelectorAll(".nav-links > a");
  const location = document.location.pathname;

  for (const link of navLinks) {
    const ref = link.getAttribute("href");
    if (ref !== location) continue;
    link.classList.add("text-brand-100");
    break;
  }
</script>

<style>
  #nav.open {
    transform: translateY(0);
  }
</style>
